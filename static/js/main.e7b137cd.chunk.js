(this["webpackJsonppoint-game-react"]=this["webpackJsonppoint-game-react"]||[]).push([[0],{14:function(e,t,n){e.exports={imageGrid:"LearnRoute_imageGrid__39iJh",questImageContainer:"LearnRoute_questImageContainer__3VCF3",answerImageContainer:"LearnRoute_answerImageContainer__35uX4",input:"LearnRoute_input__3nB-G"}},27:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(20),a=n.n(r),o=(n(27),n(7)),u=(n(28),n(8)),s=n(2),l=n(1);function j(e){var t=e.sectionData,n=Object(c.useState)(null),i=Object(o.a)(n,2),r=i[0],a=i[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Point Game"}),Object(l.jsx)("div",{children:Object(l.jsx)(u.b,{to:"/train/all",children:"Wszystkie dzia\u0142y"})}),t?t.map((function(e){return Object(l.jsx)("div",{children:Object(l.jsx)(u.b,{to:"/train/".concat(e.codeName),children:e.friendlyName})},e.codeName)})):"",Object(l.jsx)("div",{children:"Je\u015bli nie szkoda ci internetu to dla p\u0142ynniejszego dzia\u0142ania aplikacji mo\u017cesz na zapas pobra\u0107 z g\xf3ry wszystkie zdj\u0119cia do pami\u0119ci podr\u0119cznej"}),Object(l.jsx)("button",{onClick:function(e){e.preventDefault(),a(!1);var n=t.map((function(e){return e.items.map((function(e){return e.imageUrl}))})).flat();Promise.all(n.map((function(e){return function(e){return new Promise((function(t){var n=new Image;n.onload=t,n.onerror=t,n.src=e}))}(e.src)}))).then((function(){a(!0)}))},children:"Wczytaj obrazki"}),!1===r?Object(l.jsx)("div",{children:"Wczytywanie obrazk\xf3w..."}):"",!0===r?Object(l.jsx)("div",{children:"Obrazki wczytane"}):""]})}var d=n(10),b=n(18);var m=n(14),f=n.n(m);function h(e){var t=e.sectionData,n=Object(s.g)().sectionCodeName,i=Object(c.useState)(null),r=Object(o.a)(i,2),a=r[0],j=r[1],m=Object(c.useState)(null),h=Object(o.a)(m,2),O=h[0],p=h[1],x=null!==a&&void 0!==a?a:[],g=Object(o.a)(x,1)[0],v=Object(c.useState)(null),y=Object(o.a)(v,2),z=y[0],w=y[1];console.log(a),Object(c.useEffect)((function(){var e=function(e){return function(t){return Object(b.a)(Object(b.a)({},t),{},{sectionFriendlyName:e.friendlyName})}},c=function(e){j(function(e){for(var t,n=Object(d.a)(e),c=n.length;0!==c;){t=Math.floor(Math.random()*c),c--;var i=[n[t],n[c]];n[c]=i[0],n[t]=i[1]}return n}(e))};if("all"===n)c(t.map((function(t){return t.items.map(e(t))})).flat());else{var i=t.find((function(e){return e.codeName===n}));if(null==i)return j(null),void p(null);c(i.items.map(e(i)))}p([])}),[n,t]);var k=function(e,t){e.preventDefault(),t?(j(a.slice(1)),p([].concat(Object(d.a)(O),[g]))):a.length>1&&j([].concat(Object(d.a)(a.slice(1,2)),[g],Object(d.a)(a.slice(2)))),w(!1)};if(null==a)return Object(l.jsxs)("div",{children:["Nie istnieje taka sekcja, wr\xf3\u0107 do ",Object(l.jsx)(u.b,{to:"/",children:"strony g\u0142\xf3wnej"})]});if(null==g)return Object(l.jsxs)("div",{children:["Brawo, zda\u0142x\u015b!!!!!!!! ",Object(l.jsx)("button",{onClick:function(){return window.history.go(0)},children:"Zacznij od nowa"})," b\u0105d\u017a ",Object(l.jsx)(u.b,{to:"/",children:"przejd\u017a do menu g\u0142\xf3wnego"}),", ewentualnie id\u017a spa\u0107"]});return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:f.a.imageGrid,children:[Object(l.jsx)("div",{className:f.a.questImageContainer,children:Object(l.jsx)("img",{src:g.imageUrl})}),z?Object(l.jsx)("div",{className:f.a.answerImageContainer,children:g.names.join(" | ")}):""]}),Object(l.jsx)("div",{children:z?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{onClick:function(e){return k(e,!0)},children:"Wiem"}),Object(l.jsx)("button",{onClick:function(e){return k(e,!1)},children:"Nie wiem"})]}):Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("button",{onClick:function(e){e.preventDefault(),w(!0)},children:"Poka\u017c odpowied\u017a"})})}),Object(l.jsxs)("div",{children:["wiesz: ",O.length," | nie wiesz: ",a.length]})]})}var O=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(),a=Object(o.a)(r,2),d=a[0],b=a[1],m=function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector("tbody");return Array.from(t.children)};return Object(c.useEffect)((function(){fetch("/point-game/data/zzz_dzia\u0142y.html").then((function(e){return e.text()})).then((function(e){var t=m(e).map((function(e){return Array.from(e.querySelectorAll("td")).map((function(e){return e.textContent}))}));i(t)}))}),[]),Object(c.useEffect)((function(){n&&Promise.all(n.map((function(e){var t=Object(o.a)(e,2)[1];return fetch("/point-game/data/".concat(t,".html"))}))).then((function(e){return Promise.all(e.map((function(e){return e.text()})))})).then((function(e){return e.map((function(e){return m(e).slice(1).map((function(e){var t=Array.from(e.querySelectorAll("td"));return{imageUrl:t[0].children.item(0).children.item(0).getAttribute("src").replace(/=w\d+-h\d+$/,""),names:t.slice(1).map((function(e){return e.innerText}))}}))}))})).then((function(e){return n.map((function(t,n){var c=Object(o.a)(t,2);return{codeName:c[0],friendlyName:c[1],items:e[n]}}))})).then((function(e){b(e)}))}),[n]),console.log(d),Object(l.jsx)("div",{className:"App",children:d?Object(l.jsx)(u.a,{basename:"/point-game",children:Object(l.jsxs)(s.d,{children:[Object(l.jsx)(s.b,{path:"/",exact:!0,children:Object(l.jsx)(j,{sectionData:d})}),Object(l.jsx)(s.b,{path:"/train/:sectionCodeName",children:Object(l.jsx)(h,{sectionData:d})}),Object(l.jsx)(s.a,{to:"/"})]})}):Object(l.jsx)("div",{children:"Pobieranie aktualnych danych"})})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root")),p()}},[[35,1,2]]]);
//# sourceMappingURL=main.e7b137cd.chunk.js.map